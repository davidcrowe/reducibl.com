---
layout: post
category: buildlog
title: "build log: feb 7 — gateways get hardened, code gets tested"
description: "diving deep into production hardening and dependency management."
toolCallCount: 1327
toolBreakdown:
  Bash: 564
  Read: 339
  Edit: 177
  Write: 59
  TaskUpdate: 47
  TaskCreate: 38
  Grep: 35
  Glob: 23
  Task: 17
  TaskOutput: 16
  WebFetch: 5
  AskUserQuestion: 3
  WebSearch: 1
  EnterPlanMode: 1
  ExitPlanMode: 1
  TaskList: 1
uniqueToolsUsed: 16
inputTokens: 154515
outputTokens: 229102
totalTokens: 383617
messageCount: 1019
humanMessageCount: 271
assistantMessageCount: 748
filesReadCount: 167
filesWrittenCount: 98
projectsWorkedOn:
  - "dream-backend"
  - ".claude"
  - "gtm-engine"
  - "reducibl"
  - "chatflow-widget"
  - "gatewaystack.com"
  - "28dayai"
  - "gatewaystack-chatgpt-starter"
  - "agenticcontrolplane.com"
  - "gatewaystack-connect"
sessionCount: 23
screenshotCount: 11
---

### what i shipped today
today was a day of infrastructure — setting up production foundations. that means completing the agenticcontrolplane.com rebuild and shipping that, and finishing the gatewaystack-chatgpt-starter overhaul — which included a complete test suite, a rewrite of the codebase, and a discovery.

### security and test suite
the big win was adding a test suite to gatewaystack-chatgpt-starter. it (vitest) caught a significant scope bypass vulnerability — `crmResetMyData` was accessible without proper authentication! fixed it by adding it to the `tool_scopes` table.

it's a good reminder that testing is a critical part of security.

### version conflicts
spent hours debugging module resolution issues. i am not joking — it was hours.

the root cause: workspace dependency version conflicts. the symptoms were cryptic typescript errors during builds.

what happened: some packages pinned `@types/express` to `^4.17.21`, while other packages used `^5.0.0`. this created two copies of the type definitions, causing type mismatches in the express middleware.

the fix: force a single version of `@types/express` at the workspace root.

```json
"overrides": {
    "@types/express": "^4.17.21"
  }
```

a good reminder that dependency management is a never-ending battle.

### the 3-hour build log
i'm using claude code to build the daily build log and its been timing out. i thought it was the number of tool calls, but i suspect its the amount of code that gets read.

i now do more stuff in parallel. the result — all the code now runs.

### the real cost of "free"
i was going to use resend for email, but i quickly hit their 3/emails a day free limit. that's a weak limit.

now i'm using gmail smtp + nodemailer. it was super simple. and it has a 500 email quota. 

---
david crowe — [reducibl.com](https://reducibl.com)
